/* esm.sh - @dnd-kit/sortable@10.0.0 */
import ee,{useMemo as Y,useRef as F,useEffect as M,useState as Te,useContext as Ee}from"/react@18.3.1/es2022/react.mjs";import{useDndContext as Ae,getClientRect as Ne,useDroppable as Oe,useDraggable as Le,closestCorners as Xe,getFirstCollision as Ye,getScrollableAncestors as Me,KeyboardCode as x}from"/@dnd-kit/core@6.0.8/X-ZEBkbmQta2l0L3V0aWxpdGllc0AzLjIuMixyZWFjdEAxOC4zLjE/es2022/core.mjs";import{useMemo as J,useLayoutEffect as xe,useEffect as Ie,useRef as ke,useCallback as _e}from"/react@18.3.1/es2022/react.mjs";function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return J(()=>r=>{t.forEach(o=>o(r))},t)}var ye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Re(e){let t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Se(e){return"nodeType"in e}function Ce(e){var t,n;return e?Re(e)?e:Se(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}var G=ye?xe:Ie;var z={};function Z(e,t){return J(()=>{if(t)return t;let n=z[e]==null?0:z[e]+1;return z[e]=n,e+"-"+n},[e,t])}function De(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((i,s)=>{let c=Object.entries(s);for(let[l,u]of c){let a=i[l];a!=null&&(i[l]=a+e*u)}return i},{...t})}}var k=De(-1);function _(e){if(!e)return!1;let{KeyboardEvent:t}=Ce(e.target);return t&&e instanceof t}var A=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[A.Translate.toString(e),A.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}});function te(e,t,n){let r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ot(e,t,n){let r=e.slice();return r[t]=e[n],r[n]=e[t],r}function je(e,t){return e.reduce((n,r,o)=>{let i=t.get(r);return i&&(n[o]=i),n},Array(e.length))}function O(e){return e!==null&&e>=0}function Ve(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $e(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}var L={scaleX:1,scaleY:1},it=e=>{var t;let{rects:n,activeNodeRect:r,activeIndex:o,overIndex:i,index:s}=e,c=(t=n[o])!=null?t:r;if(!c)return null;let l=ze(n,s,o);if(s===o){let u=n[i];return u?{x:o<i?u.left+u.width-(c.left+c.width):u.left-c.left,y:0,...L}:null}return s>o&&s<=i?{x:-c.width-l,y:0,...L}:s<o&&s>=i?{x:c.width+l,y:0,...L}:{x:0,y:0,...L}};function ze(e,t,n){let r=e[t],o=e[t-1],i=e[t+1];return!r||!o&&!i?0:n<t?o?r.left-(o.left+o.width):i.left-(r.left+r.width):i?i.left-(r.left+r.width):r.left-(o.left+o.width)}var ne=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e,i=te(t,r,n),s=t[o],c=i[o];return!c||!s?null:{x:c.left-s.left,y:c.top-s.top,scaleX:c.width/s.width,scaleY:c.height/s.height}},st=e=>{let{activeIndex:t,index:n,rects:r,overIndex:o}=e,i,s;return n===t&&(i=r[n],s=r[o]),n===o&&(i=r[n],s=r[t]),!s||!i?null:{x:s.left-i.left,y:s.top-i.top,scaleX:s.width/i.width,scaleY:s.height/i.height}},X={scaleX:1,scaleY:1},ct=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:s}=e,c=(t=i[n])!=null?t:r;if(!c)return null;if(o===n){let u=i[s];return u?{x:0,y:n<s?u.top+u.height-(c.top+c.height):u.top-c.top,...X}:null}let l=Ge(i,o,n);return o>n&&o<=s?{x:0,y:-c.height-l,...X}:o<n&&o>=s?{x:0,y:c.height+l,...X}:{x:0,y:0,...X}};function Ge(e,t,n){let r=e[t],o=e[t-1],i=e[t+1];return r?n<t?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}var re="Sortable",oe=ee.createContext({activeIndex:-1,containerId:re,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ne,disabled:{draggable:!1,droppable:!1}});function ut(e){let{children:t,id:n,items:r,strategy:o=ne,disabled:i=!1}=e,{active:s,dragOverlay:c,droppableRects:l,over:u,measureDroppableContainers:a}=Ae(),d=Z(re,n),f=c.rect!==null,g=Y(()=>r.map(w=>typeof w=="object"&&"id"in w?w.id:w),[r]),I=s!=null,y=s?g.indexOf(s.id):-1,b=u?g.indexOf(u.id):-1,R=F(g),v=!Ve(g,R.current),m=b!==-1&&y===-1||v,h=$e(i);G(()=>{v&&I&&a(g)},[v,g,I,a]),M(()=>{R.current=g},[g]);let S=Y(()=>({activeIndex:y,containerId:d,disabled:h,disableTransforms:m,items:g,overIndex:b,useDragOverlay:f,sortedRects:je(g,l),strategy:o}),[y,d,h.draggable,h.droppable,m,g,b,l,f,o]);return ee.createElement(oe.Provider,{value:S},t)}var Fe=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return te(n,r,o).indexOf(t)},He=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:i,newIndex:s,previousItems:c,previousContainerId:l,transition:u}=e;return!u||!r||c!==i&&o===s?!1:n?!0:s!==o&&t===l},Ke={duration:200,easing:"ease"},ie="transform",Pe=A.Transition.toString({property:ie,duration:0,easing:"linear"}),Ue={roleDescription:"sortable"};function qe(e){let{disabled:t,index:n,node:r,rect:o}=e,[i,s]=Te(null),c=F(n);return G(()=>{if(!t&&n!==c.current&&r.current){let l=o.current;if(l){let u=Ne(r.current,{ignoreTransform:!0}),a={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(a.x||a.y)&&s(a)}}n!==c.current&&(c.current=n)},[t,n,r,o]),M(()=>{i&&s(null)},[i]),i}function at(e){let{animateLayoutChanges:t=He,attributes:n,disabled:r,data:o,getNewIndex:i=Fe,id:s,strategy:c,resizeObserverConfig:l,transition:u=Ke}=e,{items:a,containerId:d,activeIndex:f,disabled:g,disableTransforms:I,sortedRects:y,overIndex:b,useDragOverlay:R,strategy:v}=Ee(oe),m=We(r,g),h=a.indexOf(s),S=Y(()=>({sortable:{containerId:d,index:h,items:a},...o}),[d,o,h,a]),w=Y(()=>a.slice(a.indexOf(s)),[a,s]),{rect:N,node:H,isOver:ce,setNodeRef:K}=Oe({id:s,data:S,disabled:m.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...l}}),{active:T,activatorEvent:ue,activeNodeRect:ae,attributes:le,setNodeRef:P,listeners:de,isDragging:V,over:fe,setActivatorNodeRef:ge,transform:pe}=Le({id:s,data:S,attributes:{...Ue,...n},disabled:m.draggable}),he=Q(K,P),C=!!T,U=C&&!I&&O(f)&&O(b),q=!R&&V,W=q&&U?pe:null,be=U?W??(c??v)({rects:y,activeNodeRect:ae,activeIndex:f,overIndex:b,index:h}):null,E=O(f)&&O(b)?i({id:s,items:a,activeIndex:f,overIndex:b}):h,D=T?.id,p=F({activeId:D,items:a,newIndex:E,containerId:d}),me=a!==p.current.items,B=t({active:T,containerId:d,isDragging:V,isSorting:C,id:s,index:h,items:a,newIndex:p.current.newIndex,previousItems:p.current.items,previousContainerId:p.current.containerId,transition:u,wasDragging:p.current.activeId!=null}),$=qe({disabled:!B,index:h,node:H,rect:N});return M(()=>{C&&p.current.newIndex!==E&&(p.current.newIndex=E),d!==p.current.containerId&&(p.current.containerId=d),a!==p.current.items&&(p.current.items=a)},[C,E,d,a]),M(()=>{if(D===p.current.activeId)return;if(D!=null&&p.current.activeId==null){p.current.activeId=D;return}let we=setTimeout(()=>{p.current.activeId=D},50);return()=>clearTimeout(we)},[D]),{active:T,activeIndex:f,attributes:le,data:S,rect:N,index:h,newIndex:E,items:a,isOver:ce,isSorting:C,isDragging:V,listeners:de,node:H,overIndex:b,over:fe,setNodeRef:he,setActivatorNodeRef:ge,setDroppableNodeRef:K,setDraggableNodeRef:P,transform:$??be,transition:ve()};function ve(){if($||me&&p.current.newIndex===h)return Pe;if(!(q&&!_(ue)||!u)&&(C||B))return A.Transition.toString({...u,property:ie})}}function We(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function j(e){if(!e)return!1;let t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}var Be=[x.Down,x.Right,x.Up,x.Left],lt=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:i,over:s,scrollableAncestors:c}}=t;if(Be.includes(e.code)){if(e.preventDefault(),!n||!r)return;let l=[];i.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;let f=o.get(d.id);if(f)switch(e.code){case x.Down:r.top<f.top&&l.push(d);break;case x.Up:r.top>f.top&&l.push(d);break;case x.Left:r.left>f.left&&l.push(d);break;case x.Right:r.left<f.left&&l.push(d);break}});let u=Xe({active:n,collisionRect:r,droppableRects:o,droppableContainers:l,pointerCoordinates:null}),a=Ye(u,"id");if(a===s?.id&&u.length>1&&(a=u[1].id),a!=null){let d=i.get(n.id),f=i.get(a),g=f?o.get(f.id):null,I=f?.node.current;if(I&&g&&d&&f){let b=Me(I).some((w,N)=>c[N]!==w),R=se(d,f),v=Je(d,f),m=b||!R?{x:0,y:0}:{x:v?r.width-g.width:0,y:v?r.height-g.height:0},h={x:g.left,y:g.top};return m.x&&m.y?h:k(h,m)}}}};function se(e,t){return!j(e)||!j(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Je(e,t){return!j(e)||!j(t)||!se(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}export{ut as SortableContext,te as arrayMove,ot as arraySwap,He as defaultAnimateLayoutChanges,Fe as defaultNewIndexGetter,j as hasSortableData,it as horizontalListSortingStrategy,ne as rectSortingStrategy,st as rectSwappingStrategy,lt as sortableKeyboardCoordinates,at as useSortable,ct as verticalListSortingStrategy};
//# sourceMappingURL=sortable.bundle.mjs.map